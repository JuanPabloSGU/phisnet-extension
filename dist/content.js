(()=>{"use strict";chrome.storage.local.get(["automatic_search"],(e=>{e.automatic_search?chrome.storage.local.get(["jwt"],(e=>{if(chrome.runtime.lastError)console.error(chrome.runtime.lastError.message);else{const r=e.jwt;if(r){const e=document.getElementsByTagName("a"),o=new Set;for(let r=0;r<e.length;r++)o.add({href:e[r].href,text:e[r].innerText});const t=Array.from(o).map((e=>fetch("http://localhost:5000/api/v1/llm_mock",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({url:e.href})}).then((e=>e.json())).then((r=>({url:e.href,score:r.message}))).catch((e=>{console.error("Error fetching data:",e)}))));Promise.all(t).then((e=>{e=e.filter((e=>null!=e&&null!==e.url&&void 0!==e.url&&""!==e.url)),chrome.runtime.sendMessage({links:e},(e=>{console.log("Response from background:",e)}))}))}else console.error("JWT is empty")}})):console.log("Automatic search disabled")}))})();